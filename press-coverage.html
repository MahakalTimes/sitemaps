<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Press Coverage | MahakalTimes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="robots" content="index,follow" />
  <link rel="canonical" href="https://sitemaps.mahakaltimes.com/press-coverage.html">
  <link rel="stylesheet" href="/assets/styles.css">

  <!-- Optional JSON-LD: ItemList of press articles (list gets populated via JS below) -->
  <script type="application/ld+json">
  { "@context":"https://schema.org", "@type":"ItemList", "name":"MahakalTimes Press Coverage", "itemListElement":[] }
  </script>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <nav class="nav">
      <a href="/" class="logo">MahakalTimes Sitemaps</a>
      <div class="links">
        <a href="/backlink-hub.html">Backlink Hub</a>
        <a href="/tier3-hub.html">Tier-3 Hub</a>
        <a href="/press-coverage.html">Press Coverage</a>
        <a href="/sitemap_index_final.xml">Sitemap Index</a>
        <button id="themeToggle" class="toggle" type="button">ðŸŒ— Theme</button>
      </div>
    </nav>
  </header>

  <main class="wrap">
    <section class="card">
      <h1>Press Coverage</h1>
      <p class="muted">Earned media mentions and articles about MahakalTimes (HTML-only list; not included in XML sitemaps).</p>

      <div class="controls">
        <input id="q" class="input" type="search" placeholder="Search by outlet / title / domain â€¦" />
        <button id="clearBtn" class="btn" type="button">Clear</button>
        <button id="copyBtn" class="btn" type="button">Copy Visible</button>
      </div>

      <div class="stats" id="stats">Loadingâ€¦</div>
      <div id="errors"></div>
      <ol id="pressList" class="list"></ol>

      <p class="muted" style="margin-top:12px">To request an addition/correction, write to info@mahakaltimes.com.</p>
    </section>
  </main>

  <!-- Footer -->
  <footer>
    <div class="footer-wrap">
      <div class="footer-top">
        <div class="fbrand">
          <h4>MahakalTimes Sitemaps</h4>
          <p>Utility subdomain for XML sitemaps & backlink hubs. Helps Google index our domain cleanly.</p>
        </div>
        <div class="fcol">
          <h5>Technical</h5>
          <div class="flinks">
            <a href="/sitemap_index_final.xml">Sitemap Index (XML)</a>
            <a href="/robots.txt">robots.txt</a>
            <a href="/404.html">Custom 404</a>
          </div>
        </div>
        <div class="fcol">
          <h5>Info</h5>
          <div class="flinks">
            <a href="/about.html">About</a>
            <a href="/terms.html">Terms</a>
            <a href="/privacy.html">Privacy</a>
            <a href="/changelog.html">Changelog</a>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <div>Â© 2025 MahakalTimes</div>
        <div>Contact: info@mahakaltimes.com</div>
      </div>
    </div>
  </footer>

  <script src="/assets/app.js"></script>
  <script>
    // ðŸ‘‰ Press sitemap source (your file)
    const PRESS_SITEMAP = "https://sitemaps.mahakaltimes.com/sitemap-press-fixed.xml";

    const list = document.getElementById('pressList');
    const stats = document.getElementById('stats');
    const errs  = document.getElementById('errors');
    const q     = document.getElementById('q');
    const clearBtn = document.getElementById('clearBtn');
    const copyBtn  = document.getElementById('copyBtn');

    const all = new Set(); // de-dup
    let visible = [];

    function parseSitemap(xmlText){
      const doc = new DOMParser().parseFromString(xmlText, "application/xml");
      const err = doc.querySelector("parsererror");
      if (err) throw new Error("XML parse error");
      return [...doc.querySelectorAll("loc")].map(n => n.textContent.trim()).filter(Boolean);
    }

    function outletFrom(url){
      try{
        const u = new URL(url);
        return u.hostname.replace(/^www\./,'');
      }catch{return 'external';}
    }

    async function load(){
      stats.textContent = "Loading press sitemapâ€¦";
      try{
        const res = await fetch(PRESS_SITEMAP, {cache:"no-store"});
        if(!res.ok) throw new Error(res.status + " " + res.statusText);
        const xml = await res.text();
        const locs = parseSitemap(xml);
        locs.forEach(u => {
          try {
            const p = new URL(u);
            if (p.protocol === "http:" || p.protocol === "https:") all.add(u);
          } catch {}
        });
      }catch(e){
        const p = document.createElement('p'); p.className='err';
        p.textContent = "Failed to load press sitemap â†’ " + e.message;
        errs.appendChild(p);
      }
      visible = Array.from(all);
      render();
      stats.textContent = `Total links: ${all.size} â€¢ Showing: ${visible.length}`;
    }

    function render(){
      list.innerHTML = "";
      const frag = document.createDocumentFragment();
      visible.forEach(u=>{
        const li = document.createElement('li');
        const a  = document.createElement('a');
        a.href = u; a.textContent = `${outletFrom(u)} â€” ${u}`;
        a.target = "_blank"; a.rel = "nofollow noopener";
        li.appendChild(a);
        frag.appendChild(li);
      });
      list.appendChild(frag);
    }

    function filter(){
      const term = (q.value||"").toLowerCase().trim();
      visible = term ? Array.from(all).filter(u => u.toLowerCase().includes(term)) : Array.from(all);
      render();
      stats.textContent = `Total links: ${all.size} â€¢ Showing: ${visible.length}${term?' (filtered)':''}`;
    }

    q.addEventListener('input', filter);
    clearBtn.addEventListener('click', ()=>{ q.value=""; filter(); });
    copyBtn.addEventListener('click', async ()=>{
      try{ await navigator.clipboard.writeText(visible.join('\n'));
        copyBtn.textContent = "Copied!"; setTimeout(()=>copyBtn.textContent="Copy Visible",1200);
      }catch{ alert("Copy failed"); }
    });

    load();
  </script>
</body>
</html>
