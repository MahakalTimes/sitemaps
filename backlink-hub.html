<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Backlink Hub | MahakalTimes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="robots" content="index,follow" />
  <link rel="canonical" href="https://sitemaps.mahakaltimes.com/backlink-hub.html">
  <link rel="stylesheet" href="/assets/styles.css">
</head>
<body>
  <!-- Header / Navbar -->
  <header class="header">
    <nav class="nav">
      <a href="/" class="logo">MahakalTimes Sitemaps</a>
      <div class="links">
        <a href="/backlink-hub.html">Backlink Hub</a>
        <a href="/tier3-hub.html">Tier-3 Hub</a>
        <a href="/press-coverage.html">Press Coverage</a>
        <a href="/sitemap_index_final.xml">Sitemap Index</a>
        <button id="themeToggle" class="toggle" type="button">ðŸŒ— Theme</button>
      </div>
    </nav>
  </header>

  <!-- Main -->
  <main class="wrap">
    <section class="card">
  <h1>Backlink Hub</h1>
  <p class="muted">HTML directory of external backlinks. Not included in XMLâ€”to avoid GSC errors.</p>

  <div class="controls">
    <input id="q" class="input" type="search" placeholder="Search backlinks (domain / title / path) â€¦" />
    <button id="clearBtn" class="btn" type="button">Clear</button>
    <button id="copyBtn" class="btn" type="button" title="Copy all visible links">Copy Visible</button>
  </div>

  <div class="stats" id="stats">Loadingâ€¦</div>
  <div id="errors"></div>

  <!-- ðŸ‘‡ Now the list is also inside this card -->
  <ol id="list" class="list"></ol>

 <p class="muted" style="margin-top:12px">HTML hub only; no external links in sitemaps.</p>
  </section>
</main>
  
  <!-- Footer (same as index) -->
  <footer>
    <div class="footer-wrap">
      <div class="footer-top">
        <div class="fbrand">
          <h4>MahakalTimes Sitemaps</h4>
          <p>Utility subdomain for XML sitemaps & backlink hubs. Helps Google index our domain cleanly.</p>
        </div>
        <div class="fcol">
          <h5>Technical</h5>
          <div class="flinks">
            <a href="/sitemap_index_final.xml">Sitemap Index (XML)</a>
            <a href="/robots.txt">robots.txt</a>
            <a href="/404.html">Custom 404</a>
          </div>
        </div>
        <div class="fcol">
          <h5>Info</h5>
          <div class="flinks">
            <a href="/about.html">About</a>
            <a href="/terms.html">Terms</a>
            <a href="/privacy.html">Privacy</a>
            <a href="/changelog.html">Changelog</a>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <div>Â© 2025 MahakalTimes</div>
        <div>Contact: info@mahakaltimes.com</div>
      </div>
    </div>
  </footer>

  <!-- Your original JS (unchanged) -->
  <script src="/assets/app.js"></script>
  <script>
    const SITEMAP_URLS = [
      "https://sitemaps.mahakaltimes.com/sitemap-part-1.xml",
      "https://sitemaps.mahakaltimes.com/sitemap-press-fixed.xml"
    ];

    const elList = document.getElementById("list");
    const elStats = document.getElementById("stats");
    const elErrors = document.getElementById("errors");
    const q = document.getElementById("q");
    const clearBtn = document.getElementById("clearBtn");
    const copyBtn  = document.getElementById("copyBtn");

    const allLinks = new Set();  // de-duplicate
    let visibleLinks = [];

    function parseSitemap(xmlText) {
      const doc = new DOMParser().parseFromString(xmlText, "application/xml");
      const err = doc.querySelector("parsererror");
      if (err) throw new Error("XML parse error");
      return [...doc.querySelectorAll("loc")].map(n => n.textContent.trim()).filter(Boolean);
    }

    async function fetchAll() {
      elStats.textContent = "Loading sitemapsâ€¦";
      elErrors.textContent = "";
      let fetched = 0;

      for (const url of SITEMAP_URLS) {
        try {
          const res = await fetch(url, {cache: "no-store"});
          if (!res.ok) throw new Error(res.status + " " + res.statusText);
          const txt = await res.text();
          const locs = parseSitemap(txt);
          for (const u of locs) {
            try {
              const parsed = new URL(u);
              if (parsed.protocol === "http:" || parsed.protocol === "https:") allLinks.add(u);
            } catch {}
          }
          fetched++;
        } catch (e) {
          const p = document.createElement("p");
          p.className = "err";
          p.textContent = "Failed to load " + url + " â†’ " + e.message;
          elErrors.appendChild(p);
        }
      }

      visibleLinks = Array.from(allLinks);
      render();
      elStats.textContent = `Sitemaps loaded: ${fetched}/${SITEMAP_URLS.length} â€¢ Total links: ${allLinks.size} â€¢ Showing: ${visibleLinks.length}`;
    }

    function render() {
      elList.innerHTML = "";
      const frag = document.createDocumentFragment();
      for (const u of visibleLinks) {
        const li = document.createElement("li");
        const a = document.createElement("a");
        a.href = u; a.textContent = u; a.target = "_blank"; a.rel = "nofollow noopener";
        li.appendChild(a); frag.appendChild(li);
      }
      elList.appendChild(frag);
    }

    function applyFilter() {
      const term = q.value.trim().toLowerCase();
      visibleLinks = term ? Array.from(allLinks).filter(u => u.toLowerCase().includes(term)) : Array.from(allLinks);
      render();
      elStats.textContent = `Total links: ${allLinks.size} â€¢ Showing: ${visibleLinks.length}${term ? " (filtered)" : ""}`;
    }

    q.addEventListener("input", applyFilter);
    clearBtn.addEventListener("click", () => { q.value = ""; applyFilter(); });

    copyBtn.addEventListener("click", async () => {
      try { await navigator.clipboard.writeText(visibleLinks.join("\n"));
        copyBtn.textContent = "Copied!"; setTimeout(()=>copyBtn.textContent="Copy Visible",1200);
      } catch { alert("Copy failed"); }
    });

    fetchAll();
  </script>
</body>
</html>
